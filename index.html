<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ö†Ô∏è POPPY PLAYTIME - CHAPTER 5 - COUNTDOWN ‚ö†Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Creepster&family=Special+Elite&family=Nosifer&display=swap" rel="stylesheet">
<style>
  *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

  :root {
    --blood: #8b0000;
    --neon-blue: #00f0ff;
    --neon-pink: #ff0066;
    --dark: #0a0a0a;
    --fog: rgba(0,240,255,0.03);
  }

  html, body {
    width:100%; height:100%;
    overflow-x:hidden;
    background: var(--dark);
    font-family: 'Special Elite', cursive;
    color: #e0e0e0;
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Ccircle cx='12' cy='12' r='10' fill='none' stroke='%23ff0066' stroke-width='2'/%3E%3Ccircle cx='12' cy='12' r='2' fill='%23ff0066'/%3E%3C/svg%3E") 12 12, crosshair;
  }

  /* ===== BACKGROUND LAYERS ===== */
  .bg-layer {
    position: fixed; inset:0; z-index:0;
  }

  .bg-layer::before {
    content:'';
    position:absolute; inset:0;
    background:
      radial-gradient(ellipse at 20% 80%, rgba(139,0,0,0.25) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(0,240,255,0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(255,0,102,0.05) 0%, transparent 70%),
      linear-gradient(180deg, #050508 0%, #0a0a12 40%, #0d0508 100%);
  }

  /* Animated noise grain */
  .grain {
    position:fixed; inset:-50%; z-index:1;
    width:300%; height:300%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.4'/%3E%3C/svg%3E");
    opacity: 0.06;
    animation: grainShift 0.5s steps(3) infinite;
    pointer-events:none;
  }
  @keyframes grainShift {
    0%{transform:translate(0,0)} 33%{transform:translate(-2%,-1%)} 66%{transform:translate(1%,2%)} 100%{transform:translate(0,0)}
  }

  /* VHS scanlines */
  .scanlines {
    position:fixed; inset:0; z-index:2; pointer-events:none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.15) 2px,
      rgba(0,0,0,0.15) 4px
    );
  }

  /* Floating particles */
  .particles {
    position:fixed; inset:0; z-index:1; pointer-events:none; overflow:hidden;
  }
  .particle {
    position:absolute;
    width:3px; height:3px;
    background: var(--neon-blue);
    border-radius:50%;
    opacity:0;
    animation: floatUp linear infinite;
    box-shadow: 0 0 6px var(--neon-blue), 0 0 12px var(--neon-blue);
  }

  @keyframes floatUp {
    0%  {opacity:0; transform:translateY(100vh) scale(0.5)}
    10% {opacity:0.8}
    90% {opacity:0.3}
    100%{opacity:0; transform:translateY(-10vh) scale(1.2)}
  }

  /* Random glitch effect on the whole page */
  .glitch-overlay {
    position:fixed; inset:0; z-index:100; pointer-events:none;
    opacity:0;
    animation: glitchFlash 8s ease-in-out infinite;
  }
  @keyframes glitchFlash {
    0%,96%,100%{opacity:0}
    97%{opacity:1; background:rgba(255,0,102,0.05)}
    98%{opacity:0}
    99%{opacity:1; background:rgba(0,240,255,0.03)}
  }

  /* ===== MAIN CONTENT ===== */
  .container {
    position:relative; z-index:10;
    min-height:100vh;
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    padding:2rem;
    text-align:center;
  }

  /* Warning tape */
  .warning-tape {
    position:fixed; top:0; left:0; right:0; z-index:50;
    height:40px;
    background: repeating-linear-gradient(
      -45deg,
      #1a1a1a,
      #1a1a1a 10px,
      #ffcc00 10px,
      #ffcc00 20px
    );
    display:flex; align-items:center; justify-content:center;
    overflow:hidden;
  }
  .warning-tape span {
    font-family:'Nosifer',cursive;
    font-size:0.7rem;
    color:#000;
    letter-spacing:4px;
    text-transform:uppercase;
    animation: marquee 10s linear infinite;
    white-space:nowrap;
  }
  @keyframes marquee {
    0%{transform:translateX(100vw)}
    100%{transform:translateX(-100%)}
  }

  .warning-tape-bottom {
    position:fixed; bottom:0; left:0; right:0; z-index:50;
    height:40px;
    background: repeating-linear-gradient(
      45deg,
      #1a1a1a,
      #1a1a1a 10px,
      #ffcc00 10px,
      #ffcc00 20px
    );
  }

  /* Title */
  .title-wrapper {
    margin-bottom:1rem;
    animation: fadeSlideDown 1.5s ease-out;
  }
  @keyframes fadeSlideDown {
    0%{opacity:0;transform:translateY(-60px)} 100%{opacity:1;transform:translateY(0)}
  }

  .subtitle {
    font-family:'Special Elite',cursive;
    font-size:clamp(0.9rem,2vw,1.2rem);
    color:var(--neon-blue);
    letter-spacing:12px;
    text-transform:uppercase;
    text-shadow:0 0 20px var(--neon-blue);
    margin-bottom:0.5rem;
    animation: flicker 4s ease-in-out infinite;
  }
  @keyframes flicker {
    0%,100%{opacity:1} 50%{opacity:0.85} 52%{opacity:1} 53%{opacity:0.7} 54%{opacity:1}
  }

  .main-title {
    font-family:'Nosifer',cursive;
    font-size:clamp(2rem,7vw,5rem);
    color: transparent;
    background: linear-gradient(180deg, #ff0066 0%, #8b0000 60%, #3d0000 100%);
    -webkit-background-clip:text;
    background-clip:text;
    filter: drop-shadow(0 0 30px rgba(255,0,102,0.5)) drop-shadow(0 0 60px rgba(139,0,0,0.3));
    line-height:1.1;
    animation: titlePulse 3s ease-in-out infinite;
  }
  @keyframes titlePulse {
    0%,100%{filter:drop-shadow(0 0 30px rgba(255,0,102,0.5)) drop-shadow(0 0 60px rgba(139,0,0,0.3))}
    50%{filter:drop-shadow(0 0 50px rgba(255,0,102,0.8)) drop-shadow(0 0 100px rgba(139,0,0,0.5))}
  }

  .chapter {
    font-family:'Creepster',cursive;
    font-size:clamp(1.5rem,5vw,3.5rem);
    color:#ffcc00;
    text-shadow: 0 0 10px #ffcc00, 0 0 30px rgba(255,204,0,0.4);
    letter-spacing:8px;
    margin-top:0.3rem;
    animation: fadeSlideDown 2s ease-out;
  }

  /* Countdown */
  .countdown-label {
    font-family:'Special Elite',cursive;
    font-size:clamp(0.7rem,1.5vw,1rem);
    color:var(--neon-pink);
    letter-spacing:6px;
    text-transform:uppercase;
    margin: 2rem 0 1rem;
    text-shadow:0 0 15px var(--neon-pink);
    animation: fadeSlideDown 2.5s ease-out;
  }

  .countdown {
    display:flex;
    gap:clamp(0.8rem,3vw,2rem);
    flex-wrap:wrap;
    justify-content:center;
    animation: fadeSlideDown 3s ease-out;
  }

  .time-block {
    position:relative;
    display:flex; flex-direction:column;
    align-items:center;
    min-width:90px;
  }

  .time-value {
    font-family:'Nosifer',cursive;
    font-size:clamp(2.5rem,8vw,5.5rem);
    color:#fff;
    text-shadow:
      0 0 10px var(--neon-blue),
      0 0 30px var(--neon-blue),
      0 0 60px rgba(0,240,255,0.3);
    line-height:1;
    transition: all 0.3s ease;
    position:relative;
  }
  .time-value::after {
    content:'';
    position:absolute;
    bottom:-4px; left:10%; right:10%;
    height:2px;
    background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
    box-shadow: 0 0 10px var(--neon-blue);
  }

  .time-label {
    font-family:'Special Elite',cursive;
    font-size:clamp(0.6rem,1.2vw,0.85rem);
    color:var(--neon-pink);
    text-transform:uppercase;
    letter-spacing:4px;
    margin-top:0.8rem;
    text-shadow:0 0 8px rgba(255,0,102,0.5);
  }

  .separator {
    font-family:'Nosifer',cursive;
    font-size:clamp(2rem,6vw,4rem);
    color:var(--blood);
    align-self:flex-start;
    margin-top:0.5rem;
    animation: blink 1s step-end infinite;
    text-shadow:0 0 20px rgba(139,0,0,0.8);
  }
  @keyframes blink {0%,100%{opacity:1}50%{opacity:0.2}}

  /* Message */
  .message {
    margin-top:2.5rem;
    font-family:'Special Elite',cursive;
    font-size:clamp(0.8rem,1.8vw,1.1rem);
    color:#888;
    letter-spacing:2px;
    max-width:600px;
    line-height:1.8;
    animation: fadeSlideDown 3.5s ease-out;
  }
  .message .highlight {
    color:var(--neon-pink);
    text-shadow:0 0 10px rgba(255,0,102,0.3);
  }

  /* Sound button */
  .sound-btn {
    position:fixed;
    bottom:60px; right:20px;
    z-index:200;
    width:50px; height:50px;
    border-radius:50%;
    border:2px solid var(--neon-pink);
    background:rgba(0,0,0,0.8);
    color:var(--neon-pink);
    font-size:1.3rem;
    cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    transition:all 0.3s;
    box-shadow:0 0 15px rgba(255,0,102,0.3);
  }
  .sound-btn:hover {
    background:var(--neon-pink);
    color:#000;
    box-shadow:0 0 30px rgba(255,0,102,0.6);
    transform:scale(1.1);
  }

  /* Eye that follows cursor */
  .creepy-eye {
    position:fixed;
    z-index:5;
    width:80px; height:80px;
    pointer-events:none;
    opacity:0.15;
    transition: opacity 3s;
  }
  .creepy-eye.visible { opacity:0.4 }
  .eye-outer {
    width:80px; height:40px;
    border-radius:50%;
    border:2px solid var(--neon-pink);
    position:relative;
    overflow:hidden;
    box-shadow: 0 0 20px rgba(255,0,102,0.3);
  }
  .eye-pupil {
    width:16px; height:16px;
    background:var(--neon-pink);
    border-radius:50%;
    position:absolute;
    top:50%; left:50%;
    transform:translate(-50%,-50%);
    box-shadow:0 0 10px var(--neon-pink);
    transition: all 0.1s ease-out;
  }

  /* Hand reaching from bottom */
  .creepy-hand {
    position:fixed;
    bottom:-120px; left:50%;
    transform:translateX(-50%);
    z-index:3;
    font-size:8rem;
    opacity:0;
    animation: handReach 15s ease-in-out infinite 5s;
    filter: drop-shadow(0 0 30px rgba(139,0,0,0.5));
    pointer-events:none;
  }
  @keyframes handReach {
    0%,100%{bottom:-120px;opacity:0}
    40%{bottom:-40px;opacity:0.15}
    50%{bottom:-30px;opacity:0.2}
    60%{bottom:-40px;opacity:0.15}
    80%{bottom:-120px;opacity:0}
  }

  /* Blood drips */
  .blood-drip {
    position:fixed;
    top:40px;
    width:4px;
    background:linear-gradient(180deg, var(--blood), transparent);
    border-radius:0 0 50% 50%;
    z-index:3;
    opacity:0;
    pointer-events:none;
    animation: drip 6s ease-in infinite;
  }
  @keyframes drip {
    0%{height:0;opacity:0.8}
    70%{height:120px;opacity:0.6}
    100%{height:200px;opacity:0}
  }

  /* Released state */
  .released-message {
    display:none;
    font-family:'Nosifer',cursive;
    font-size:clamp(1.5rem,5vw,3rem);
    color:var(--neon-pink);
    text-shadow:0 0 30px var(--neon-pink), 0 0 60px rgba(255,0,102,0.5);
    animation: pulseGlow 1.5s ease-in-out infinite;
    margin-top:2rem;
  }
  .released-message.show { display:block }
  @keyframes pulseGlow {
    0%,100%{text-shadow:0 0 30px var(--neon-pink),0 0 60px rgba(255,0,102,0.5)}
    50%{text-shadow:0 0 50px var(--neon-pink),0 0 100px rgba(255,0,102,0.8),0 0 150px rgba(255,0,102,0.3)}
  }

  .play-btn {
    display:none;
    margin-top:2rem;
    padding:1rem 3rem;
    font-family:'Creepster',cursive;
    font-size:1.5rem;
    color:#ffcc00;
    background:transparent;
    border:2px solid #ffcc00;
    cursor:pointer;
    letter-spacing:4px;
    text-transform:uppercase;
    transition:all 0.3s;
    text-shadow:0 0 10px rgba(255,204,0,0.5);
    box-shadow:0 0 20px rgba(255,204,0,0.2);
  }
  .play-btn.show{display:inline-block}
  .play-btn:hover{
    background:#ffcc00;color:#000;
    box-shadow:0 0 40px rgba(255,204,0,0.5);
    transform:scale(1.05);
  }

  /* Footer */
  .footer {
    position:fixed;
    bottom:45px; left:0; right:0;
    text-align:center;
    z-index:20;
    font-size:0.6rem;
    color:#333;
    letter-spacing:3px;
    text-transform:uppercase;
  }

  /* Responsive */
  @media(max-width:600px){
    .countdown{gap:0.5rem}
    .time-block{min-width:65px}
    .separator{font-size:1.5rem}
  }

  /* Glitch text effect */
  .glitch-text {
    position:relative;
  }
  .glitch-text::before,
  .glitch-text::after {
    content:attr(data-text);
    position:absolute;
    top:0;left:0;right:0;
    overflow:hidden;
    background:transparent;
  }
  .glitch-text::before {
    color:var(--neon-blue);
    animation:glitch1 3s infinite linear;
    clip-path:polygon(0 0,100% 0,100% 33%,0 33%);
  }
  .glitch-text::after {
    color:var(--neon-pink);
    animation:glitch2 3s infinite linear;
    clip-path:polygon(0 66%,100% 66%,100% 100%,0 100%);
  }
  @keyframes glitch1{
    0%,100%{transform:translate(0)}
    20%{transform:translate(-3px,2px)}
    40%{transform:translate(3px,-1px)}
    60%{transform:translate(-1px,1px)}
    80%{transform:translate(2px,-2px)}
  }
  @keyframes glitch2{
    0%,100%{transform:translate(0)}
    20%{transform:translate(3px,-1px)}
    40%{transform:translate(-2px,2px)}
    60%{transform:translate(1px,-2px)}
    80%{transform:translate(-3px,1px)}
  }

  /* Heartbeat red vignette */
  .vignette {
    position:fixed; inset:0; z-index:2; pointer-events:none;
    box-shadow:inset 0 0 150px rgba(139,0,0,0.3), inset 0 0 300px rgba(0,0,0,0.5);
    animation: heartbeat 4s ease-in-out infinite;
  }
  @keyframes heartbeat {
    0%,100%{box-shadow:inset 0 0 150px rgba(139,0,0,0.2),inset 0 0 300px rgba(0,0,0,0.5)}
    15%{box-shadow:inset 0 0 200px rgba(139,0,0,0.4),inset 0 0 350px rgba(0,0,0,0.6)}
    30%{box-shadow:inset 0 0 150px rgba(139,0,0,0.2),inset 0 0 300px rgba(0,0,0,0.5)}
    45%{box-shadow:inset 0 0 180px rgba(139,0,0,0.35),inset 0 0 320px rgba(0,0,0,0.55)}
  }
</style>
</head>
<body>

<!-- Background layers -->
<div class="bg-layer"></div>
<div class="grain"></div>
<div class="scanlines"></div>
<div class="vignette"></div>
<div class="glitch-overlay"></div>

<!-- Particles -->
<div class="particles" id="particles"></div>

<!-- Blood drips -->
<div class="blood-drip" style="left:10%;animation-delay:0s"></div>
<div class="blood-drip" style="left:25%;animation-delay:2s"></div>
<div class="blood-drip" style="left:55%;animation-delay:4s"></div>
<div class="blood-drip" style="left:78%;animation-delay:1s"></div>
<div class="blood-drip" style="left:92%;animation-delay:3s"></div>

<!-- Warning tape -->
<div class="warning-tape">
  <span>‚ö† DANGER ‚ö† DO NOT ENTER ‚ö† PLAYTIME CO. ‚ö† RESTRICTED AREA ‚ö† DANGER ‚ö† DO NOT ENTER ‚ö† PLAYTIME CO. ‚ö† RESTRICTED AREA ‚ö† DANGER ‚ö† DO NOT ENTER ‚ö†</span>
</div>
<div class="warning-tape-bottom"></div>

<!-- Creepy hand -->
<div class="creepy-hand">üñêÔ∏è</div>

<!-- Eye -->
<div class="creepy-eye" id="creepyEye">
  <div class="eye-outer">
    <div class="eye-pupil" id="eyePupil"></div>
  </div>
</div>

<!-- Main Content -->
<div class="container">
  <div class="title-wrapper">
    <div class="subtitle">‚ñ∏ Playtime Co. pr√©sente ‚óÇ</div>
    <h1 class="main-title glitch-text" data-text="POPPY PLAYTIME">POPPY PLAYTIME</h1>
    <div class="chapter">‚Äî CHAPTER 5 ‚Äî</div>
  </div>

  <div class="countdown-label">Le cauchemar commence dans</div>

  <div class="countdown" id="countdown">
    <div class="time-block">
      <div class="time-value" id="days">00</div>
      <div class="time-label">Jours</div>
    </div>
    <div class="separator">:</div>
    <div class="time-block">
      <div class="time-value" id="hours">00</div>
      <div class="time-label">Heures</div>
    </div>
    <div class="separator">:</div>
    <div class="time-block">
      <div class="time-value" id="minutes">00</div>
      <div class="time-label">Minutes</div>
    </div>
    <div class="separator">:</div>
    <div class="time-block">
      <div class="time-value" id="seconds">00</div>
      <div class="time-label">Secondes</div>
    </div>
  </div>

  <div class="released-message" id="releasedMsg">
    üéÆ C'EST SORTI ! üéÆ
  </div>
  <a href="https://store.steampowered.com/app/1721470/Poppy_Playtime/" target="_blank" class="play-btn" id="playBtn">
    ‚ñ∂ JOUER MAINTENANT
  </a>

  <div class="message">
    <span class="highlight">18 F√©vrier 2026</span><br>
    Ils t'attendent dans l'usine...<br>
    <span class="highlight">Tu n'es pas pr√™t.</span>
  </div>
</div>

<!-- Sound button -->
<button class="sound-btn" id="soundBtn" title="Activer le son">üîá</button>

<div class="footer">Fan-made ‚Ä¢ Non affili√© √† MOB Entertainment</div>

<script>
// ===== COUNTDOWN =====
const releaseDate = new Date('2026-02-18T00:00:00').getTime();

function updateCountdown() {
  const now = Date.now();
  const diff = releaseDate - now;

  if (diff <= 0) {
    document.getElementById('countdown').style.display = 'none';
    document.querySelector('.countdown-label').style.display = 'none';
    document.getElementById('releasedMsg').classList.add('show');
    document.getElementById('playBtn').classList.add('show');
    return;
  }

  const d = Math.floor(diff / 86400000);
  const h = Math.floor((diff % 86400000) / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);

  document.getElementById('days').textContent = String(d).padStart(2,'0');
  document.getElementById('hours').textContent = String(h).padStart(2,'0');
  document.getElementById('minutes').textContent = String(m).padStart(2,'0');
  document.getElementById('seconds').textContent = String(s).padStart(2,'0');
}

updateCountdown();
setInterval(updateCountdown, 1000);

// ===== PARTICLES =====
const particlesEl = document.getElementById('particles');
for (let i = 0; i < 30; i++) {
  const p = document.createElement('div');
  p.className = 'particle';
  p.style.left = Math.random()*100 + '%';
  p.style.animationDuration = (6 + Math.random()*10) + 's';
  p.style.animationDelay = Math.random()*8 + 's';
  p.style.width = p.style.height = (2+Math.random()*3)+'px';
  if (Math.random()>0.5) {
    p.style.background='#ff0066';
    p.style.boxShadow='0 0 6px #ff0066,0 0 12px #ff0066';
  }
  particlesEl.appendChild(p);
}

// ===== EYE FOLLOWS CURSOR =====
const eye = document.getElementById('creepyEye');
const pupil = document.getElementById('eyePupil');
let eyeTimeout;

document.addEventListener('mousemove', (e) => {
  // Position eye
  eye.style.left = (e.clientX - 180) + 'px';
  eye.style.top = (e.clientY + 60) + 'px';
  eye.classList.add('visible');

  // Pupil follow
  const rect = eye.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;
  const dx = e.clientX - cx;
  const dy = e.clientY - cy;
  const angle = Math.atan2(dy,dx);
  const dist = Math.min(12, Math.sqrt(dx*dx+dy*dy)/10);
  pupil.style.left = (50 + Math.cos(angle)*dist*2) + '%';
  pupil.style.top = (50 + Math.sin(angle)*dist*3) + '%';

  clearTimeout(eyeTimeout);
  eyeTimeout = setTimeout(()=> eye.classList.remove('visible'), 2000);
});

// ===== TERRIFYING AUDIO (Web Audio API) =====
let audioCtx, isPlaying = false;

function createHorrorAudio() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  // Deep drone
  const drone = audioCtx.createOscillator();
  drone.type = 'sawtooth';
  drone.frequency.setValueAtTime(40, audioCtx.currentTime);
  drone.frequency.linearRampToValueAtTime(35, audioCtx.currentTime + 10);

  const droneGain = audioCtx.createGain();
  droneGain.gain.setValueAtTime(0.06, audioCtx.currentTime);

  const droneFilter = audioCtx.createBiquadFilter();
  droneFilter.type = 'lowpass';
  droneFilter.frequency.setValueAtTime(200, audioCtx.currentTime);

  drone.connect(droneFilter);
  droneFilter.connect(droneGain);
  droneGain.connect(audioCtx.destination);
  drone.start();

  // Sub bass pulse
  const sub = audioCtx.createOscillator();
  sub.type = 'sine';
  sub.frequency.setValueAtTime(25, audioCtx.currentTime);
  const subGain = audioCtx.createGain();
  subGain.gain.setValueAtTime(0, audioCtx.currentTime);

  // Heartbeat LFO
  const lfo = audioCtx.createOscillator();
  lfo.type = 'sine';
  lfo.frequency.setValueAtTime(0.8, audioCtx.currentTime); // heartbeat ~48bpm
  const lfoGain = audioCtx.createGain();
  lfoGain.gain.setValueAtTime(0.08, audioCtx.currentTime);
  lfo.connect(lfoGain);
  lfoGain.connect(subGain.gain);
  lfo.start();

  sub.connect(subGain);
  subGain.connect(audioCtx.destination);
  sub.start();

  // Eerie high frequency
  const eerie = audioCtx.createOscillator();
  eerie.type = 'sine';
  eerie.frequency.setValueAtTime(1200, audioCtx.currentTime);
  eerie.frequency.linearRampToValueAtTime(800, audioCtx.currentTime + 20);
  eerie.frequency.linearRampToValueAtTime(1400, audioCtx.currentTime + 40);

  const eerieGain = audioCtx.createGain();
  eerieGain.gain.setValueAtTime(0.008, audioCtx.currentTime);

  const eerieFilter = audioCtx.createBiquadFilter();
  eerieFilter.type = 'bandpass';
  eerieFilter.frequency.setValueAtTime(1000, audioCtx.currentTime);
  eerieFilter.Q.setValueAtTime(10, audioCtx.currentTime);

  eerie.connect(eerieFilter);
  eerieFilter.connect(eerieGain);
  eerieGain.connect(audioCtx.destination);
  eerie.start();

  // White noise (wind/static)
  const bufferSize = audioCtx.sampleRate * 2;
  const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
  const output = noiseBuffer.getChannelData(0);
  for (let i = 0; i < bufferSize; i++) {
    output[i] = Math.random() * 2 - 1;
  }
  const noise = audioCtx.createBufferSource();
  noise.buffer = noiseBuffer;
  noise.loop = true;

  const noiseGain = audioCtx.createGain();
  noiseGain.gain.setValueAtTime(0.015, audioCtx.currentTime);

  const noiseFilter = audioCtx.createBiquadFilter();
  noiseFilter.type = 'bandpass';
  noiseFilter.frequency.setValueAtTime(400, audioCtx.currentTime);
  noiseFilter.Q.setValueAtTime(0.5, audioCtx.currentTime);

  // Slowly modulate noise
  const noiseLfo = audioCtx.createOscillator();
  noiseLfo.frequency.setValueAtTime(0.1, audioCtx.currentTime);
  const noiseLfoGain = audioCtx.createGain();
  noiseLfoGain.gain.setValueAtTime(300, audioCtx.currentTime);
  noiseLfo.connect(noiseLfoGain);
  noiseLfoGain.connect(noiseFilter.frequency);
  noiseLfo.start();

  noise.connect(noiseFilter);
  noiseFilter.connect(noiseGain);
  noiseGain.connect(audioCtx.destination);
  noise.start();

  // Creepy detuned notes (music box feel)
  function playCreepyNote(delay) {
    const notes = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00];
    const note = notes[Math.floor(Math.random()*notes.length)];

    const osc = audioCtx.createOscillator();
    osc.type = 'triangle';
    osc.frequency.setValueAtTime(note + (Math.random()-0.5)*8, audioCtx.currentTime + delay);

    const g = audioCtx.createGain();
    g.gain.setValueAtTime(0, audioCtx.currentTime + delay);
    g.gain.linearRampToValueAtTime(0.025, audioCtx.currentTime + delay + 0.05);
    g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + delay + 3);

    const reverb = audioCtx.createBiquadFilter();
    reverb.type = 'lowpass';
    reverb.frequency.setValueAtTime(800, audioCtx.currentTime);

    osc.connect(reverb);
    reverb.connect(g);
    g.connect(audioCtx.destination);
    osc.start(audioCtx.currentTime + delay);
    osc.stop(audioCtx.currentTime + delay + 3.5);
  }

  // Schedule random creepy notes
  function scheduleNotes() {
    if (!isPlaying) return;
    const numNotes = 2 + Math.floor(Math.random()*3);
    for (let i = 0; i < numNotes; i++) {
      playCreepyNote(Math.random() * 6);
    }
    setTimeout(scheduleNotes, 5000 + Math.random()*5000);
  }
  scheduleNotes();

  return { drone, sub, eerie, noise, droneGain, subGain, eerieGain, noiseGain };
}

let audioNodes = null;
const soundBtn = document.getElementById('soundBtn');

soundBtn.addEventListener('click', () => {
  if (!isPlaying) {
    isPlaying = true;
    audioNodes = createHorrorAudio();
    soundBtn.textContent = 'üîä';
    soundBtn.style.borderColor = '#00f0ff';
    soundBtn.style.color = '#00f0ff';
    soundBtn.style.boxShadow = '0 0 15px rgba(0,240,255,0.4)';
  } else {
    isPlaying = false;
    if (audioCtx) {
      audioCtx.close();
      audioCtx = null;
    }
    soundBtn.textContent = 'üîá';
    soundBtn.style.borderColor = '';
    soundBtn.style.color = '';
    soundBtn.style.boxShadow = '';
  }
});

// ===== Random screen flicker =====
setInterval(()=>{
  if (Math.random()>0.92) {
    document.body.style.filter = 'brightness(1.5) contrast(1.3)';
    setTimeout(()=>{
      document.body.style.filter = 'brightness(0.7)';
      setTimeout(()=> document.body.style.filter='', 50);
    }, 50);
  }
}, 3000);
</script>

</body>
</html>
